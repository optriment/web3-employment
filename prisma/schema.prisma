generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Company {
  id           String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  display_name String
  comment      String?
  employees    Employee[]
  created_at   DateTime   @default(now())
  updated_at   DateTime   @updatedAt
  archived_at  DateTime?

  @@map("companies")
}

model Employee {
  id             String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  display_name   String
  comment        String?
  contacts       String?
  wallet_address String?
  company        Company   @relation(fields: [company_id], references: [id], onDelete: Restrict)
  company_id     String    @db.Uuid
  payments       Payment[]
  created_at     DateTime  @default(now())
  updated_at     DateTime  @updatedAt
  archived_at    DateTime?

  @@map("employees")
}

model Payment {
  id               String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  transaction_hash String   @unique
  amount           Int
  wallet_address   String
  employee         Employee @relation(fields: [employee_id], references: [id], onDelete: Restrict)
  employee_id      String   @db.Uuid
  created_at       DateTime @default(now())

  @@map("payments")
}
